# AI 开发规范指南

## 开发规则

1. 任务管理
- 所有功能必须在 `TODO.md` 清单范围内进行开发
- 开发顺序可以灵活调整，但必须确保功能完整性和依赖关系
- 如需开发 TODO 清单之外的功能，必须先与项目负责人确认
- 在开发前永远和我确认

2. 功能完成标准
- 每个功能模块完成后必须：
  1. 完成单元测试和集成测试
  2. 提供测试报告和覆盖率数据
  3. 获得项目负责人确认
  4. 更新 `TODO.md` 的完成状态
  
3. 错误处理规范
- 使用自定义错误类型处理业务错误
- 所有可能失败的操作必须返回 Result
- 错误信息必须包含中英文描述
- 关键错误必须记录到日志系统

4. 异步编程规范
- 所有 I/O 操作必须使用异步实现
- 使用 tokio 作为异步运行时
- 长时间运行的任务必须支持取消操作
- 必须处理并发限制和超时

5. 国际化要求
- 所有用户界面文本必须同时支持中英文
- 所有错误消息必须有中英文版本
- 使用 i18n 系统管理所有文本

6. 测试要求
- 单元测试覆盖率必须达到 80% 以上
- 必须包含集成测试
- 关键功能必须有端到端测试

7. 性能要求
- 应用启动时间不超过 2 秒
- UI 响应时间不超过 100ms
- 动画必须保持 60fps

8. 安全要求
- 敏感数据必须加密存储
- 使用 HTTPS 进行网络通信
- 实现适当的权限控制

9. 界面要求
- 界面必须美观、简洁、易用
- 界面必须符合苹果设计规范
- 界面必须适配浅色模式
- 界面必须适配刘海屏、水滴屏、挖孔屏等异形屏
- 界面必须适配横屏、竖屏等不同方向
- 界面必须适配不同分辨率
- 界面严格按照 @docs/layout.md 中的布局进行开发

## 配置

```json
{
  "enforceRules": true,
  "requireTaskInTodo": true,
  "requireTestCoverage": true,
  "requireI18n": true,
  "requireErrorHandling": true,
  "requireAsync": true,
  "updateTodoOnComplete": true,
  "generateTestReport": true
}
``` 
# 界面布局设计

## 主界面（AI对话界面）

### 布局结构
```
+------------------------+
|       状态栏            |
+------------------------+
|                        |
|      对话历史区域       |
|                        |
|                        |
|                        |
+------------------------+
|    输入模式切换按钮     |
+------------------------+
|      输入区域          |
|   (语音/文字输入)      |
+------------------------+
```

### 组件说明
1. 状态栏
   - 显示连接状态（AI服务、MCP服务）
   - 设置按钮
   - 当前工作状态指示

2. 对话历史区域
   - 支持上下滚动
   - 消息气泡样式
   - 语音/文字混合显示
   - 处理状态指示
   - 支持重试/编辑操作

3. 输入模式切换
   - 语音/文字切换按钮
   - 当前模式指示

4. 输入区域
   - 语音模式：
     - 大型录音按钮
     - 音量可视化
     - 录音时长显示
   - 文字模式：
     - 文本输入框
     - 发送按钮
     - 表情/附件支持

## 锁屏 Widget

### 小号 Widget
```
+------------------+
|   快速录音按钮    |
+------------------+
```

### 中号 Widget
```
+------------------+
|   快速录音按钮    |
|   最近对话预览    |
+------------------+
```

### 大号 Widget
```
+------------------+
|   快速录音按钮    |
|   最近对话预览    |
|   快捷操作栏      |
+------------------+
```

## 设置页面

### 布局结构
```
+------------------------+
|      设置页面标题       |
+------------------------+
|  输入偏好设置           |
|  - 默认输入模式         |
|  - 语音设置            |
|  - 文字设置            |
+------------------------+
|  AI 设置               |
|  - 模型选择            |
|  - 语言设置            |
|  - 个性化配置          |
+------------------------+
|  Triage 设置          |
|  - Prompt 编辑器      |
|  - 规则配置            |
|  - 目标系统设置        |
+------------------------+
|  MCP 设置             |
|  - 服务器配置          |
|  - 连接管理            |
|  - 同步设置            |
+------------------------+
|  界面设置              |
|  - 主题选择            |
|  - 字体大小            |
|  - Widget 配置        |
+------------------------+
|  关于                  |
+------------------------+
```

## 交互设计要点

1. 语音输入体验
   - 即时反馈：音量可视化
   - 清晰的状态指示
   - 简单的手势控制
   - 错误处理和提示

2. 对话流畅性
   - 平滑的动画过渡
   - 即时的输入反馈
   - 清晰的处理状态
   - 错误恢复机制

3. Widget 交互
   - 最小化操作步骤
   - 清晰的视觉反馈
   - 快速启动主程序
   - 状态同步

4. 设置页面
   - 分类清晰
   - 实时预览
   - 简化复杂配置
   - 配置导入导出

## 主题设计

### 明亮主题
- 背景色：#FFFFFF
- 主要文本：#000000
- 次要文本：#666666
- 强调色：#007AFF
- 边框色：#E5E5E5
- 输入区背景：#F5F5F5

### 暗黑主题
- 背景色：#000000
- 主要文本：#FFFFFF
- 次要文本：#999999
- 强调色：#0A84FF
- 边框色：#333333
- 输入区背景：#1C1C1E

## 响应式设计
- 支持横屏/竖屏切换
- 适配不同 iPhone 尺寸
- 支持 iPad 分屏
- 动态字体大小 
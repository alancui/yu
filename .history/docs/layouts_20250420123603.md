# 界面布局设计

## 文字交互界面

### 布局结构
```
+------------------------+
|       状态栏            |
+------------------------+
|                        |
|      对话历史区域       |
|     (文字对话记录)      |
|                        |
|                        |
+------------------------+
|   输入框        [发送]  |
+------------------------+
| [语音] [拍照] [文件] [录音模式] |
+------------------------+
```

### 组件说明
1. 状态栏
   - 显示连接状态（AI服务）
   - 设置按钮
   - 当前工作状态指示

2. 对话历史区域
   - 支持上下滚动
   - 文字消息气泡样式
   - 处理状态指示
   - 支持消息编辑/重试
   - 带有头像的消息气泡
   - 消息操作按钮（复制、分享）

3. 输入区域
   - 文本输入框：
     - 多行文本支持
     - 表情/附件支持
   - 发送按钮：
     - 仅在有内容时激活
     - 发送状态反馈

4. 功能按钮区域
   - 语音输入按钮：
     - 点击开始语音输入
     - 语音转文字实时显示在输入框
     - 音量可视化反馈
   - 拍摄照片按钮：
     - 调用相机功能
     - 支持预览和确认
   - 上传文件按钮：
     - 调用文件选择器
     - 支持多种文件类型
   - 切换到语音模式按钮：
     - 快速切换到语音交互界面

## 语音交互界面

### 布局结构
```
+------------------------+
|       状态栏            |
+------------------------+
|                        |
|                        |
|                        |
|     [大型录音按钮]      |
|                        |
|                        |
|                     [⌨️] |
+------------------------+
```

### 组件说明
1. 状态栏
   - 显示连接状态（AI服务）
   - 设置按钮
   - 当前工作状态指示

2. 录音按钮区域
   - 居中显示的大型圆形录音按钮
   - 录音状态动画
   - 音量可视化环形显示
   - 长按录音或点击切换录音模式

3. 模式切换按钮
   - 位于右下角
   - 紧凑的键盘图标按钮
   - 点击切换到文字交互界面

## 锁屏 Widget

### 小号 Widget
```
+------------------+
|   快速录音按钮    |
+------------------+
```

### 中号 Widget
```
+------------------+
|   快速录音按钮    |
|   最近对话预览    |
+------------------+
```

### 大号 Widget
```
+------------------+
|   快速录音按钮    |
|   最近对话预览    |
|   快捷操作栏      |
+------------------+
```

## 设置页面

### 布局结构
```
+------------------------+
|      设置页面标题       |
+------------------------+
|  交互偏好设置           |
|  - 默认交互模式         |
|  - 语音播放设置         |
|  - 语音识别设置         |
+------------------------+
|  语言设置              |
|  - 默认对话语言         |
|  - 语音识别语言         |
|  - 界面语言            |
+------------------------+
|  Triage 设置          |
|  - Prompt 编辑器      |
|  - 目标系统设置        |
|  - 历史目标系统操作记录 |
+------------------------+
|  界面设置              |
|  - 主题选择            |
|  - 字体大小            |
|  - Widget 配置        |
+------------------------+
|  关于                  |
+------------------------+
```

## 设置子页面

### 语音播放设置页面

#### 布局结构
```
+------------------------+
|  < 返回  语音播放设置   |
+------------------------+
|  自动朗读回复           |
|  [开关]                |
+------------------------+
|  语音合成声音           |
|  - 男声                |
|  - 女声                |
+------------------------+
|  播放速度              |
|  [滑块控制]            |
+------------------------+
|  播放音量              |
|  [滑块控制]            |
+------------------------+
```

#### 组件说明
1. 导航栏
   - 返回按钮
   - 页面标题

2. 自动朗读回复
   - 开关控件
   - 控制是否自动播放AI回复的语音

3. 语音合成声音
   - 单选列表
   - 选择语音合成的声音类型

4. 播放速度
   - 滑块控件
   - 调整语音播放的速度(0.5x-2.0x)

5. 播放音量
   - 滑块控件
   - 调整语音播放的音量

### 语音识别设置页面

#### 布局结构
```
+------------------------+
|  < 返回  语音识别设置   |
+------------------------+
|  语音识别模型           |
|  - 标准模式            |
|  - 高精度模式          |
+------------------------+
|  语音识别灵敏度         |
|  [滑块控制]            |
+------------------------+
|  自动停止录音时间       |
|  [滑块控制]            |
+------------------------+
```

#### 组件说明
1. 导航栏
   - 返回按钮
   - 页面标题

2. 语音识别模型
   - 单选列表
   - 标准模式：使用较小的Whisper模型，速度快但准确度较低
   - 高精度模式：使用较大的Whisper模型，准确度高但速度较慢

3. 语音识别灵敏度
   - 滑块控件
   - 调整麦克风的灵敏度，影响语音识别的触发阈值

4. 自动停止录音时间
   - 滑块控件
   - 设置检测到静音后自动停止录音的等待时间(1-5秒)

### 默认交互模式设置页面

#### 布局结构
```
+------------------------+
|  < 返回  默认交互模式   |
+------------------------+
|  [单选列表]             |
|  ○ 语音交互模式        |
|  ○ 文字交互模式        |
+------------------------+
|                        |
|     说明文本区域        |
|                        |
+------------------------+
```

#### 组件说明
1. 导航栏
   - 返回按钮
   - 页面标题

2. 交互模式选择
   - 单选列表
   - 语音交互模式：启动应用时默认进入语音交互界面
   - 文字交互模式：启动应用时默认进入文字交互界面

3. 说明文本
   - 提供关于每种交互模式的简要说明
   - 包含使用场景和建议

### 语言设置页面

#### 布局结构
```
+------------------------+
|  < 返回    语言设置     |
+------------------------+
|  默认对话语言           |
|  - 简体中文            |
|  - 英文                |
|  - 日文                |
|  - ...                |
+------------------------+
|  语音识别语言           |
|  - 简体中文            |
|  - 英文                |
|  - 日文                |
|  - ...                |
+------------------------+
|  界面语言              |
|  - 简体中文            |
|  - 英文                |
|  - ...                |
+------------------------+
```

#### 组件说明
1. 导航栏
   - 返回按钮
   - 页面标题

2. 默认对话语言
   - 单选列表
   - 设置与AI对话时使用的默认语言
   - 影响AI回复的语言

3. 语音识别语言
   - 单选列表
   - 设置语音识别时使用的语言模型
   - 优化特定语言的识别准确率

4. 界面语言
   - 单选列表
   - 设置应用界面显示的语言
   - 影响所有UI元素的文本显示

### 字体大小设置页面

#### 布局结构
```
+------------------------+
|  < 返回   字体大小设置  |
+------------------------+
|  [滑块控制]             |
|  小 -----○----- 大     |
+------------------------+
|                        |
|     预览文本区域        |
|     (显示不同大小的文本)|
|                        |
+------------------------+
|  [重置为默认] 按钮      |
+------------------------+
```

#### 组件说明
1. 导航栏
   - 返回按钮
   - 页面标题

2. 字体大小调节
   - 滑块控件
   - 显示当前选择的大小标签（小、中、大）

3. 预览区域
   - 实时显示不同类型UI元素的文本大小效果
   - 包含标题、正文、按钮文本等示例

4. 重置按钮
   - 一键恢复默认字体大小设置

### Widget 配置页面

#### 布局结构
```
+------------------------+
|  < 返回  Widget 配置   |
+------------------------+
|  Widget 显示内容        |
|  □ 显示最近对话        |
|  □ 显示快捷操作按钮     |
|  □ 显示语音识别状态     |
+------------------------+
|  Widget 大小选择        |
|  ○ 小号               |
|  ○ 中号               |
|  ○ 大号               |
+------------------------+
|                        |
|     预览区域           |
|                        |
+------------------------+
```

#### 组件说明
1. 导航栏
   - 返回按钮
   - 页面标题

2. Widget 显示内容
   - 复选框列表
   - 选择 Widget 上显示的具体内容元素

3. Widget 大小选择
   - 单选列表
   - 选择 Widget 的尺寸（对应iOS不同尺寸的Widget）

4. 预览区域
   - 根据当前选择实时显示 Widget 的预览效果
   - 模拟锁屏上的显示样式

### Prompt 编辑器页面

#### 布局结构
```
+------------------------+
|  < 返回  Prompt 编辑器  |
+------------------------+
|  [下拉菜单] 选择场景    |
+------------------------+
|                        |
|                        |
|     编辑区域           |
|    (多行文本输入)      |
|                        |
|                        |
+------------------------+
|  [重置] [保存] 按钮     |
+------------------------+
|  预设模板选择           |
|  - 默认模板            |
|  - 效率优先模板        |
|  - 自定义模板1         |
|  - ...                |
+------------------------+
```

#### 组件说明
1. 导航栏
   - 返回按钮
   - 页面标题

2. 场景选择
   - 下拉菜单
   - 选择不同的使用场景（如日常对话、工作任务、学习助手等）

3. Prompt 编辑区域
   - 多行文本输入框
   - 支持富文本编辑
   - 提供变量插入功能

4. 操作按钮
   - 重置按钮：恢复到初始状态
   - 保存按钮：保存当前编辑的Prompt

5. 预设模板
   - 列表选择
   - 提供多种预设的Prompt模板
   - 支持一键应用模板

### 目标系统设置页面

#### 布局结构
```
+------------------------+
|  < 返回  目标系统设置   |
+------------------------+
|  启用的目标系统         |
|  □ Reminders 任务管理  |
|  □ Calendar 日历       |
|  □ Notes 笔记          |
|  □ 自定义系统...        |
+------------------------+
|  系统集成优先级         |
|  [拖拽排序列表]         |
+------------------------+
|  提示设置              |
|  □ 自动识别目标系统     |
|  □ 操作前确认          |
+------------------------+
```

#### 组件说明
1. 导航栏
   - 返回按钮
   - 页面标题

2. 目标系统选择
   - 复选框列表
   - 选择需要启用的系统集成
   - 点击自定义系统可以添加新的集成

3. 系统优先级
   - 可拖拽排序的列表
   - 设置多个系统冲突时的优先顺序

4. 提示设置
   - 复选框选项
   - 控制系统如何识别和处理目标系统相关的操作
   - 是否在执行操作前请求用户确认

### 历史目标系统操作记录页面

#### 布局结构
```
+------------------------+
|< 返回 历史目标系统操作  |
|  [搜索框]              |
+------------------------+
|  [筛选器]              |
|  所有系统 ▼  | 日期 ▼  |
+------------------------+
|  2024年5月15日         |
|                        |
|  [系统图标] 添加提醒    |
|  "下午3点开会"         |
|  15:30 · Reminders    |
|                        |
|  [系统图标] 创建日历事件|
|  "与客户电话会议"       |
|  14:22 · Calendar     |
+------------------------+
|  2024年5月14日         |
|                        |
|  [系统图标] 记录笔记    |
|  "项目计划大纲..."      |
|  10:15 · Notes        |
|                        |
|  [更多历史记录...]      |
+------------------------+
|  [清除历史记录] 按钮    |
+------------------------+
```

#### 组件说明
1. 导航栏
   - 返回按钮
   - 页面标题
   - 搜索框：支持关键词搜索历史操作

2. 筛选器
   - 系统筛选：按目标系统类型筛选记录
   - 日期筛选：按时间范围筛选记录

3. 历史记录列表
   - 按日期分组显示
   - 每条记录包含：
     - 系统图标：识别不同的目标系统
     - 操作类型：如"添加提醒"、"创建日历事件"
     - 内容预览：显示操作的简要内容
     - 时间和系统标签：操作的具体时间和所属系统

4. 清除按钮
   - 提供清除全部历史记录的功能
   - 执行前需要确认

## 交互设计要点

1. 模式切换
   - 顶部状态栏提供快速切换按钮
   - 切换时保持对话上下文
   - 平滑的过渡动画

2. 语音输入体验
   - 文字界面：
     - 实时语音转文字
     - 可编辑的转写结果
     - 错误提示和重试
   - 语音界面：
     - 即时音量反馈
     - 清晰的录音状态
     - 手势控制

3. AI响应
   - 文字界面：
     - 打字机效果文字显示
     - 可复制/分享的文本
   - 语音界面：
     - 自然的语音合成
     - 自动/手动播放控制
     - 文字记录同步显示

4. Widget 交互
   - 快速启动对应的交互模式
   - 保持最近对话上下文
   - 状态同步显示

## 主题设计

### 明亮主题
- 背景色：#FFFFFF
- 主要文本：#000000
- 次要文本：#666666
- 强调色：#007AFF
- 边框色：#E5E5E5
- 输入区背景：#F5F5F5

### 暗黑主题
- 背景色：#000000
- 主要文本：#FFFFFF
- 次要文本：#999999
- 强调色：#0A84FF
- 边框色：#333333
- 输入区背景：#1C1C1E

## 响应式设计
- 支持横屏/竖屏切换
- 适配不同 iPhone 尺寸
- 支持 iPad 分屏
- 动态字体大小